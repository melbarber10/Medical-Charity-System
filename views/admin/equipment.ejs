<main>
	<%- include('../partials/adminSidebar') %>
	
	<div id="main-wrapper">
		
		<div class="bg-white shadow-sm p-3">
			<span class="me-3" id="sidebar-toggler-btn"><i class="fas fa-bars"></i></span>
			<h5 class="m-0 color-theme d-inline-block">Requests</h5>
		</div>
		
		<div class="border m-4 my-3 p-4 bg-white rounded-2 shadow-sm">
			<div class="mb-2">
				<span>Donor Name:</span>
				<span><%= equipment.donor.firstName + " " + equipment.donor.lastName %></span>
			</div>
			
			<div class="mb-2">
				<span>Category:</span>
				<span><%= equipment.category %></span>
			</div>
			<div class="mb-2">
				<img src="<%= equipment.image %>" alt=" Donation Image" class="donation-image img-fluid rounded">
			</div>
			
            <div class="mb-2">
                <span>Item:</span>
                <span><%= equipment.itemDescription %></span>
            </div>
			
			<div class="mb-2">
				<span>Quantity:</span>
				<span><%= equipment.quantity %></span>
			</div>
			
			<div class="mb-2">
				<span>Condition:</span>
				<span><%= equipment.condition %></span>
			</div>
			
			<div class="mb-2">
				<span>Address to collect:</span>
				<span><%= equipment.address %></span>
			</div>
			
			<div class="mb-2">
				<span>Phone:</span>
				<span><%= equipment.phone %></span>
			</div>
			
			<% if(equipment.donorToAdminMsg != "") { %>
				<div class="mb-2">
					<span>Message from Donor:</span>
					<div class="ms-3"><%= equipment.donorToAdminMsg %></div>
				</div>
			<% } %>
				
			<div class="mb-2">
				<span>Status:</span>
				<span class="fw-bold text-<%= equipment.status %>"><%= equipment.status %></span>
			</div>
			
			<% if(equipment.status == "assigned") { %>
				<div class="mb-2">
					<span>Agent Assigned:</span>
					<span><%= equipment.agent.firstName + " "  + equipment.agent.lastName %></span>
				</div>
			<% } %>
			
			<% if(equipment.status == "assigned" && equipment.adminToAgentMsg != "") { %>
				<div class="mb-2">
					<span>Your message to Agent:</span>
					<div class="ms-3"><%= equipment.adminToAgentMsg %></div>
				</div>
			<% } %>
			
			<% if(equipment.status == "collected") { %>
				<div class="mb-2">
					<span>Collection Time:</span>
					<span><%= equipment.collectionTime.toLocaleString("en-IN", { dateStyle: "medium", timeStyle: "short"}) %></span>
				</div>
			<% } %>
			
			
			<div class="mt-4">
				<% if(equipment.status == "pending") { %>
					<a href="/admin/donations/accept/<%= equipment._id %>" class="btn">Accept</a>
					<a href="/admin/donations/reject/<%= equipment._id %>" class="btn btn-danger">Reject</a>
				<% } else if(equipment.status == "accepted") { %>
					<a href="/admin/donations/assign/<%= equipment._id %>" class="btn">Assign Agent</a>
				<% } %>
			</div>
			
		</div>
		
	</div>
</main>